@{
    ViewData["Title"] = "The Sorting Ceremony";
}

<div class="ceremony-container">
    <div class="text-center">
        <h1 class="display-3 magical-title animated-title">üé© The Sorting Hat</h1>
        <p class="lead mystical-text">The ancient hat that knows best...</p>
    </div>

    <div class="hat-container text-center my-5">
        <div class="sorting-hat">
            <span class="hat-icon">üé©</span>
        </div>
    </div>

    <div class="ceremony-message text-center my-4">
        <p class="h4 italic-text">"Hmm, difficult... Very difficult..."</p>
        <p class="h5 mt-3">"Better be... Time to sort your chores!"</p>
    </div>

    <div class="text-center my-5">
        <form asp-controller="SortingHat" asp-action="Sort" method="post">
            @Html.AntiForgeryToken()
            <button type="submit" class="btn btn-lg magical-sort-button">
                ‚ú® Begin the Sorting ‚ú®
            </button>
        </form>
    </div>

    <div class="alert alert-warning text-center mx-auto" style="max-width: 600px;">
        <strong>‚ö†Ô∏è Note:</strong> This will assign chores for @DateTime.Now.ToString("MMMM yyyy"). 
        Previous assignments for this month will remain, but new sorting will add fresh assignments.
    </div>

    <div class="alert alert-info text-center mx-auto" style="max-width: 600px;">
        <strong>üí° Tip:</strong> If you want to start fresh, use the "Clear This Month's Assignments" button on the home page first!
    </div>

    <div class="text-center mt-4">
        <a asp-controller="Home" asp-action="Index" class="btn btn-outline-secondary">
            ‚Üê Back to Home
        </a>
    </div>
</div>

<style>
    .ceremony-container {
        min-height: 80vh;
        background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #7e22ce 100%);
        padding: 40px 20px;
        border-radius: 15px;
        box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        color: white;
    }

    .magical-title {
        font-family: 'Georgia', serif;
        color: #ffd700;
        text-shadow: 3px 3px 6px rgba(0,0,0,0.5);
        animation: glow 2s ease-in-out infinite alternate;
    }

    @@keyframes glow {
        from {
            text-shadow: 3px 3px 6px rgba(0,0,0,0.5), 0 0 10px #ffd700;
        }
        to {
            text-shadow: 3px 3px 6px rgba(0,0,0,0.5), 0 0 20px #ffd700, 0 0 30px #ffd700;
        }
    }

    .mystical-text {
        color: #e0e0e0;
        font-style: italic;
    }

    .hat-container {
        perspective: 1000px;
    }

    .sorting-hat {
        display: inline-block;
        animation: float 3s ease-in-out infinite;
    }

    .hat-icon {
        font-size: 120px;
        display: block;
        filter: drop-shadow(0 10px 20px rgba(0,0,0,0.5));
    }

    @@keyframes float {
        0%, 100% {
            transform: translateY(0px) rotate(-5deg);
        }
        50% {
            transform: translateY(-20px) rotate(5deg);
        }
    }

    .ceremony-message {
        background: rgba(0,0,0,0.3);
        padding: 30px;
        border-radius: 10px;
        backdrop-filter: blur(10px);
    }

    .italic-text {
        font-style: italic;
        color: #ffd700;
    }

    .magical-sort-button {
        background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
        color: #1e3c72;
        border: none;
        padding: 20px 40px;
        font-size: 1.4em;
        font-weight: bold;
        border-radius: 50px;
        box-shadow: 0 8px 20px rgba(255,215,0,0.4);
        transition: all 0.3s;
        animation: pulse 2s infinite;
    }

    .magical-sort-button:hover {
        transform: scale(1.1);
        box-shadow: 0 12px 30px rgba(255,215,0,0.6);
        background: linear-gradient(135deg, #ffed4e 0%, #ffd700 100%);
        color: #1e3c72;
    }

    @@keyframes pulse {
        0%, 100% {
            box-shadow: 0 8px 20px rgba(255,215,0,0.4);
        }
        50% {
            box-shadow: 0 8px 30px rgba(255,215,0,0.7);
        }
    }

    .alert-warning {
        background: rgba(255,255,255,0.9);
        color: #333;
        border: none;
        border-radius: 10px;
    }
</style>

<script>
    // Add sparkles effect
    document.addEventListener('DOMContentLoaded', function() {
        const hat = document.querySelector('.sorting-hat');
        
        setInterval(function() {
            createSparkle(hat);
        }, 500);
    });

    function createSparkle(element) {
        const sparkle = document.createElement('div');
        sparkle.innerHTML = '‚ú®';
        sparkle.style.position = 'absolute';
        sparkle.style.left = (Math.random() * 100) + '%';
        sparkle.style.top = (Math.random() * 100) + '%';
        sparkle.style.animation = 'sparkle-fade 1s ease-out forwards';
        sparkle.style.fontSize = (Math.random() * 20 + 10) + 'px';
        element.parentElement.appendChild(sparkle);
        
        setTimeout(() => sparkle.remove(), 1000);
    }

    const style = document.createElement('style');
    style.textContent = `
        @@keyframes sparkle-fade {
            0% { opacity: 1; transform: translateY(0) scale(0); }
            50% { opacity: 1; transform: translateY(-30px) scale(1); }
            100% { opacity: 0; transform: translateY(-60px) scale(0); }
        }
    `;
    document.head.appendChild(style);
</script>